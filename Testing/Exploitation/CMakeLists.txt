IF(WIN32)
  ADD_DEFINITIONS(-DWIN32)
ENDIF(WIN32)

SET(EPSILON 0.01)
SET(BASELINE_FILES ${RSR_SOURCE_DIR}/Data/Baseline)
SET(TEMP ${RSRTesting_BINARY_DIR}/Temporary)

SET(EXPLOITATION_TESTS ${CXX_TEST_PATH}/otbExploitationTests)


ADD_TEST(otbSpectralResponseNew ${EXPLOITATION_TESTS}
        otbSpectralResponseNew
        )

ADD_TEST(otbSpectralResponse ${EXPLOITATION_TESTS}
        otbSpectralResponse
        ${OTB_SPECTRAL_RESPONSE}/JHU/becknic/manmade/txt/0092uuu.txt
        2.5 #lambda
        )

ADD_TEST(otbSatelliteRSRNew ${EXPLOITATION_TESTS}
        otbSatelliteRSRNew
        )

ADD_TEST(otbSatelliteRSR ${EXPLOITATION_TESTS}
        otbSatelliteRSR
        ${OTB_SAT_RSR}/SPOT5/HRG2/rep6S.dat
        4 #nb band
        2.5 #lambda
        2 #num band
        )

ADD_TEST(otbReduceSpectralResponseNew ${EXPLOITATION_TESTS}
        otbReduceSpectralResponseNew
        )

ADD_TEST(otbReduceSpectralResponse ${EXPLOITATION_TESTS}
        otbReduceSpectralResponse
        ${OTB_SPECTRAL_RESPONSE}/jpl/beckman/minerals/Arsenate/txt/A01Ac.txt
        ${OTB_SAT_RSR}/SPOT5/HRG2/rep6S.dat
        4 #nb band
        )

ADD_TEST(otbReduceSpectralResponseClassifierRAndNIR ${EXPLOITATION_TESTS}
        otbReduceSpectralResponseClassifierRAndNIR
        ${OTB_SPECTRAL_RESPONSE}/JHU/becknic/manmade/txt/0092uuu.txt
        ${OTB_SAT_RSR}/SPOT5/HRG2/rep6S.dat
        4 #nb band
        1 #red index
        2 #NIR index
        )

ADD_TEST(otbAtmosphericCorrectionsReduceSpectralResponseNew ${EXPLOITATION_TESTS}
        otbAtmosphericCorrectionsReduceSpectralResponseNew
        )
        
ADD_TEST(otbAtmosphericEffects ${EXPLOITATION_TESTS}
        otbAtmosphericEffects
        ${OTB_SPECTRAL_RESPONSE}/JHU/becknic/manmade/txt/0092uuu.txt
        ${OTB_SAT_RSR}/SPOT5/HRG2/rep6S.dat
        4 #nb band
        4 #day
        12 #month
        27.3 #zenithSolarAngle
        152.7 #azimutSolarAngle
        2.5 #viewingZenitalAngle
        -77.0 #viewingAzimutalAngle
        1013. #atmoPressure
        2.48134 #waterVaporAmount
        0.34400 #ozoneAmount
        1 #aerosolModelValue
        0.199854 #aerosolOptical
        )

ADD_TEST(otbVectorDataTest ${EXPLOITATION_TESTS}
        otbVectorDataTest
        /home2/arnaud/PROJETS/SimuCapteur/data/cultures.shp
        ${TEMP}/VectorDataToLabelImage.tif
        )
        
ADD_TEST(otbLabelMapToSimulatedImageFilterTest ${EXPLOITATION_TESTS}
        otbLabelMapToSimulatedImageFilterTest
        /home2/arnaud/PROJETS/SimuCapteur/data/culturesWithAndWithoutPath.shp
        ${OTB_SAT_RSR}/SPOT5/HRG2/rep6S.dat
        4 #nb bands
        ${TEMP}/LabelMapToSimulatedImageFilterTest.tif
        )
 
SET(EXPLOITATION_SRCS
otbExploitationTests.cxx
otbSpectralResponseNew.cxx
otbSpectralResponse.cxx
otbSatelliteRSRNew.cxx
otbSatelliteRSR.cxx
otbReduceSpectralResponseNew.cxx
otbReduceSpectralResponse.cxx
otbReduceSpectralResponseClassifierRAndNIR.cxx
otbAtmosphericCorrectionsReduceSpectralResponseNew.cxx
otbAtmosphericEffects.cxx
otbVectorDataTest.cxx
otbLabelMapToSimulatedImageFilterTest.cxx
)


ADD_EXECUTABLE(otbExploitationTests ${EXPLOITATION_SRCS})
TARGET_LINK_LIBRARIES(otbExploitationTests OTBIO OTBCommon OTBRadiometry OTBTesting PROSAIL)
