PROJECT(OTB-Wrapper)

cmake_minimum_required(VERSION 2.6)

IF(COMMAND CMAKE_POLICY)
  CMAKE_POLICY(SET CMP0003 NEW)
ENDIF(COMMAND CMAKE_POLICY)

# Path to additional CMake modules
SET(CMAKE_MODULE_PATH
    ${CMAKE_SOURCE_DIR}/CMake
    ${CMAKE_MODULE_PATH})

include(Definitions)

# Link to the Orfeo ToolBox
FIND_PACKAGE(OTB REQUIRED PATHS /usr/lib/otb )
INCLUDE(${OTB_USE_FILE})


OPTION(OTB_USE_QT "Generate Qt wrappers for Applications" ON)
IF(OTB_USE_QT)
  FIND_PACKAGE(Qt4 REQUIRED)
  SET(QT_USE_QTXML 1)
  INCLUDE(${QT_USE_FILE})
ENDIF(OTB_USE_QT)

OPTION(OTB_USE_SWIG "Generate Qt wrappers for Applications" ON)

FIND_PACKAGE(SWIG REQUIRED)
INCLUDE(${SWIG_USE_FILE})
FIND_PACKAGE(PythonLibs REQUIRED)
FIND_PACKAGE(PythonInterp REQUIRED)

SET(BUILD_SHARED_LIBS ${OTB_BUILD_SHARED_LIBS})

ADD_SUBDIRECTORY(Code)
ADD_SUBDIRECTORY(Example)

# Enable / Disable testing
OPTION(BUILD_TESTING  "Build testing." OFF)

INCLUDE(${CMAKE_ROOT}/Modules/Dart.cmake)
MARK_AS_ADVANCED(TCL_TCLSH DART_ROOT)
IF(BUILD_TESTING)
  ENABLE_TESTING()
  
  FIND_PATH(OTB_DATA_ROOT README-OTB-Data PATHS $ENV{OTB_DATA_ROOT} ${OTB_SOURCE_DIR}/../OTB-Data)
  MARK_AS_ADVANCED(OTB_DATA_ROOT)
  
  SET(BUILDNAME "${BUILDNAME}" CACHE STRING "Name of build on the dashboard")
  MARK_AS_ADVANCED(BUILDNAME)
  ADD_SUBDIRECTORY(Testing)
ENDIF(BUILD_TESTING)



